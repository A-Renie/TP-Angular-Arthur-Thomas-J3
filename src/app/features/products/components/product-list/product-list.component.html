<div class="product-container">
  <h2>Catalogue de Produits</h2>

  <!-- On résout l'Observable UNE FOIS -->
  <ng-container *ngIf="products$ | async as products">
    <!-- Aucun produit -->
    <div class="empty-message" *ngIf="products.length === 0">
      <p>Aucun produit disponible pour le moment.</p>
    </div>

    <!-- Liste des produits -->
    <div class="product-grid" *ngIf="products.length > 0">
      <div
        class="product-card"
        *ngFor="let product of products"
        [class.out-of-stock]="!product.inStock"
      >
        <h3>{{ product.name | uppercase }}</h3>
        <p class="price">Prix : {{ product.price | currency: 'EUR' }}</p>
        <p class="date">Sortie le : {{ product.releaseDate | date: 'mediumDate' }}</p>

        <p class="stock-warning" *ngIf="!product.inStock">⚠️ RUPTURE DE STOCK</p>
        <button class="delete-btn" (click)="deleteProduct(product.id)">Supprimer</button>
      </div>
    </div>
  </ng-container>
</div>
